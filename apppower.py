# -*- coding: utf-8 -*-
"""Predict.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1CnvuLTtDEV9jvKYM_McVcS0V4VN-GAWk
"""

import streamlit as st
import pandas as pd
import joblib

# Load model & scaler
model = joblib.load("solar_power.pkl")
scaler = joblib.load("solar.pkl")

st.title("ðŸŒž Solar Power Prediction App")

st.write("Enter all environmental details:")

# Inputs
day_of_year = st.number_input("Day of Year", 1, 366)
year = st.number_input("Year", 2000, 2100)
month = st.number_input("Month", 1, 12)
day = st.number_input("Day", 1, 31)
first_hour = st.number_input("First Hour of Period", 0, 23)

is_daylight = st.selectbox("Is Daylight", [0, 1])

distance_solar_noon = st.number_input("Distance to Solar Noon", -12.0, 12.0)

avg_temp = st.number_input("Average Temperature (Day)")
avg_wind_dir = st.number_input("Average Wind Direction (Day)")
avg_wind_speed_day = st.number_input("Average Wind Speed (Day)")
sky_cover = st.number_input("Sky Cover")
visibility = st.number_input("Visibility")
relative_humidity = st.number_input("Relative Humidity")
avg_wind_speed_period = st.number_input("Average Wind Speed (Period)")
avg_pressure = st.number_input("Average Barometric Pressure (Period)")

# Create dataframe
df = pd.DataFrame({
    "Day of Year":[day_of_year],
    "Year":[year],
    "Month":[month],
    "Day":[day],
    "First Hour of Period":[first_hour],
    "Is Daylight":[is_daylight],
    "Distance to Solar Noon":[distance_solar_noon],
    "Average Temperature (Day)":[avg_temp],
    "Average Wind Direction (Day)":[avg_wind_dir],
    "Average Wind Speed (Day)":[avg_wind_speed_day],
    "Sky Cover":[sky_cover],
    "Visibility":[visibility],
    "Relative Humidity":[relative_humidity],
    "Average Wind Speed (Period)":[avg_wind_speed_period],
    "Average Barometric Pressure (Period)":[avg_pressure]
})

if st.button("Predict"):
    df_scaled = scaler.transform(df)
    prediction = model.predict(df_scaled)
    st.success(f"Predicted Solar Power: {prediction[0]:,.2f}")
